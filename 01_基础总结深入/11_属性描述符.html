<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
  <!--
    1. 属性描述符：描述属性的属性，我们称之为元属性
      - writable : 决定属性是否可以写入（是否是一个只读属性）
      - enumerable : 决定属性是否可以for in枚举（遍历）
      - configurable : 决定属性是否可以重新配置或者删除
        - 重新配置：是否可以再次修改writable和enumerable的值
        - 删除：delete obj.a 是否可以被delete删除
    2. 定义属性的属性描述符
      Object.defineProperty(对象, 属性名, {
        value: xxx
      })
    3. 获取属性的属性(属性描述符/元属性)
      Object.getOwnPropertyDescriptor(对象, 属性名)
    4. 删除属性
      delete xxx
    5. 密封对象
      Object.seal(对象);
        - 不可以添加新属性
        - 不可以删除
        - 可以读写操作
    6. 冻结对象
      Object.freeze(对象);
        - 只能读
        - 不能写入、删除、添加操作
    7. 访问描述符
      get 属性获取时调用的方法
      set 属性设置时调用的方法
  -->
  <script type="text/javascript">
    /*var person = {age: 10};

    person.__proto__.sex = '男';

    Object.defineProperty(person, 'name', {
      value: 'jack',    //指定属性的值
      writable: false,  //这个属性不能修改
      enumerable: false, //这个属性不能for in遍历出来
      configurable: false //这个属性不能重新配置，不能删除
    })

    console.log(Object.getOwnPropertyDescriptor(person, 'name'));


    console.log(person);
    person.name = 'jack';
    console.log(person);
    //遍历对象和对象的原型，找到所有可以遍历的属性
    for (var key in person) {
      /!*console.log(key);
      //判断属性是否是对象自身的属性
      console.log(person.hasOwnProperty(key));*!/
      if (person.hasOwnProperty(key)) {
        console.log(key);
        console.log(person[key]);
      }
    }
    //不能重新配置
    /!*Object.defineProperty(person, 'name', {
      writable: true,
      enumerable: true,
      configurable: false
    })
    person.name = 'jack';
    console.log(person);
*!/
    /!*var arr = [1, 2, 3, 4, 5];

    arr.forEach(function (item) {
      console.log(item);
    })*!/
    //不能删除
    //删除person的age属性
    delete person.name;
    console.log(person);

    /!*person.forEach(function (value) {

    });*!/
    console.log(person.forEach);  //undefined
    /!*
      数组：
        forEach() 经常使用
        for循环  性能最好，一般不用
        for in  基本不用
      对象
        for in
     *!/


*/

    // var person = {name: 'Jack', sex: {option1: '男', option2: '女'}};

    /*Object.seal(对象);
    - 不可以添加新属性
    - 不可以删除
    - 可以读写操作*/
    /*Object.seal(person);
    console.log(person);
    person.age = 18;
    console.log(person);
    delete person.name;
    console.log(person);
    console.log(person.name);
    person.name = 'Rose';
    console.log(person);*/
    //将一个对象变成一个常量对象
    /*Object.freeze(person);
    person.name = 'Rose';
    console.log(person);
    person.sex.option3 = '人妖';
    console.log(person);*/

    //深度冻结，对象中所有属性（不管是直接属性还是属性中属性），都得恒定不变
    /*function deepFreeze(obj) {
      if (typeof obj !== 'object') return;
      //默认情况下，先给第一层冻结
      Object.freeze(obj);
      //遍历对象
      for (var key in obj) {
        //获取属性值
        var value = obj[key];
        deepFreeze(value);
      }
    }
    deepFreeze(person);
    person.sex.option3 = '人妖';
    console.log(person);*/

    var person = {firstName: 'Jack', lastName: 'Rose'}

    Object.defineProperty(person, 'fullName', {
      get: function () {
        //读取属性时调用的方法
        console.log(this);
        return this.firstName + ' ' + this.lastName;
      },
      set: function (value) {
        //设置属性时调用的方法
        var arr = value.split(' ');
        this.firstName = arr[0];
        this.lastName = arr[1];
      }
    })

    console.log(person);
    console.log(person.fullName);
    person.fullName = 'Tom Jerry';
    console.log(person);

  </script>
</body>
</html>